#ifndef OS_MASTER_FILE
#define OS_GLOBALS
#include "common.h"
#endif

#if (_OLED_6448_)

#define Write 0
#define Read  1

#define HIGH 1
#define LOW  0

enum {
    _ACK_,
    _NACK_,
};

enum {
    _LCD_SDA_INPUT_,
    _LCD_SDA_OUTPUT_,
};
#define LCD_SCL_1      OLED_SCL_PIN
#define LCD_SDA_1      OLED_SDA_PIN
#define LCD_SCL_1_PORT OLED_SCL_PORT
#define LCD_SDA_1_PORT OLED_SDA_PORT
#define LCD_SDAIN_1()                                                \
    do {                                                             \
        GPIO_Init(LCD_SDA_1_PORT, LCD_SDA_1, GPIO_Mode_In_FL_No_IT); \
    } while (0)
#define LCD_SDAOUT_1()                                                   \
    do {                                                                 \
        GPIO_Init(LCD_SDA_1_PORT, LCD_SDA_1, GPIO_Mode_Out_PP_Low_Fast); \
    } while (0)
#define LCD_SCL_1_HIGH()                         \
    do {                                         \
        GPIO_SetBits(LCD_SCL_1_PORT, LCD_SCL_1); \
    } while (0)
#define LCD_SCL_1_LOW()                            \
    do {                                           \
        GPIO_ResetBits(LCD_SCL_1_PORT, LCD_SCL_1); \
    } while (0)
#define LCD_SDA_1_HIGH()                         \
    do {                                         \
        GPIO_SetBits(LCD_SDA_1_PORT, LCD_SDA_1); \
    } while (0)
#define LCD_SDA_1_LOW()                            \
    do {                                           \
        GPIO_ResetBits(LCD_SDA_1_PORT, LCD_SDA_1); \
    } while (0)

//
// IC = SSD1306
// IIC
// 14PIN OLED
// 64*48
//

#define I2C_OLED   0x78
#define Brightness 250

//==============================================================================
//==============================================================================
//ASCII
//8*16
const uint8_t F8X16[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, /*" ",0*/
    0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x30, 0x00, 0x00, 0x00, /*"!",1*/
    0x00, 0x10, 0x0C, 0x06, 0x10, 0x0C, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, /*""",2*/
    0x40, 0xC0, 0x78, 0x40, 0xC0, 0x78, 0x40, 0x00, 0x04, 0x3F, 0x04, 0x04, 0x3F, 0x04, 0x04, 0x00, /*"#",3*/
    0x00, 0x70, 0x88, 0xFC, 0x08, 0x30, 0x00, 0x00, 0x00, 0x18, 0x20, 0xFF, 0x21, 0x1E, 0x00, 0x00, /*"$",4*/
    0xF0, 0x08, 0xF0, 0x00, 0xE0, 0x18, 0x00, 0x00, 0x00, 0x21, 0x1C, 0x03, 0x1E, 0x21, 0x1E, 0x00, /*"%",5*/
    0x00, 0xF0, 0x08, 0x88, 0x70, 0x00, 0x00, 0x00, 0x1E, 0x21, 0x23, 0x24, 0x19, 0x27, 0x21, 0x10, /*"&",6*/
    0x10, 0x16, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, /*"'",7*/
    0x00, 0x00, 0x00, 0xE0, 0x18, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x07, 0x18, 0x20, 0x40, 0x00, /*"(",8*/
    0x00, 0x02, 0x04, 0x18, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x40, 0x20, 0x18, 0x07, 0x00, 0x00, 0x00, /*")",9*/
    0x40, 0x40, 0x80, 0xF0, 0x80, 0x40, 0x40, 0x00, 0x02, 0x02, 0x01, 0x0F, 0x01, 0x02, 0x02, 0x00, /*"*",10*/
    0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x1F, 0x01, 0x01, 0x01, 0x00, /*"+",11*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xB0, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, /*",",12*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, /*"-",13*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, /*".",14*/
    0x00, 0x00, 0x00, 0x00, 0x80, 0x60, 0x18, 0x04, 0x00, 0x60, 0x18, 0x06, 0x01, 0x00, 0x00, 0x00, /*"/",15*/
    0x00, 0xE0, 0x10, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x10, 0x0F, 0x00, /*"0",16*/
    0x00, 0x10, 0x10, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00, /*"1",17*/
    0x00, 0x70, 0x08, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 0x30, 0x28, 0x24, 0x22, 0x21, 0x30, 0x00, /*"2",18*/
    0x00, 0x30, 0x08, 0x88, 0x88, 0x48, 0x30, 0x00, 0x00, 0x18, 0x20, 0x20, 0x20, 0x11, 0x0E, 0x00, /*"3",19*/
    0x00, 0x00, 0xC0, 0x20, 0x10, 0xF8, 0x00, 0x00, 0x00, 0x07, 0x04, 0x24, 0x24, 0x3F, 0x24, 0x00, /*"4",20*/
    0x00, 0xF8, 0x08, 0x88, 0x88, 0x08, 0x08, 0x00, 0x00, 0x19, 0x21, 0x20, 0x20, 0x11, 0x0E, 0x00, /*"5",21*/
    0x00, 0xE0, 0x10, 0x88, 0x88, 0x18, 0x00, 0x00, 0x00, 0x0F, 0x11, 0x20, 0x20, 0x11, 0x0E, 0x00, /*"6",22*/
    0x00, 0x38, 0x08, 0x08, 0xC8, 0x38, 0x08, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, /*"7",23*/
    0x00, 0x70, 0x88, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 0x1C, 0x22, 0x21, 0x21, 0x22, 0x1C, 0x00, /*"8",24*/
    0x00, 0xE0, 0x10, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x00, 0x00, 0x31, 0x22, 0x22, 0x11, 0x0F, 0x00, /*"9",25*/
    0x00, 0x00, 0x00, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00, 0x00, /*":",26*/

    //  0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00, /*";",27*/
    //  0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00, /*"<",28*/
    //  0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00, /*"=",29*/
    //  0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00, /*">",30*/
    //  0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00, /*"?",31*/
    //  0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00, /*"@",32*/
    //  0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20, /*"A",33*/
    //  0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00, /*"B",34*/
    //  0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00, /*"C",35*/
    //  0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00, /*"D",36*/
    //  0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00, /*"E",37*/
    //  0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00, /*"F",38*/
    //  0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00, /*"G",39*/
    //  0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20, /*"H",40*/
    //  0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00, /*"I",41*/
    //  0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00, /*"J",42*/
    //  0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00, /*"K",43*/
    //  0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00, /*"L",44*/
    //  0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00, /*"M",45*/
    //  0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00, /*"N",46*/
    //  0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00, /*"O",47*/
    //  0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00, /*"P",48*/
    //  0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00, /*"Q",49*/
    //  0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20, /*"R",50*/
    //  0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00, /*"S",51*/
    //  0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00, /*"T",52*/
    //  0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00, /*"U",53*/
    //  0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00, /*"V",54*/
    //  0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00, /*"W",55*/
    //  0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20, /*"X",56*/
    //  0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00, /*"Y",57*/
    //  0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00, /*"Z",58*/
    //  0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00, /*"[",59*/
    //  0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00, /*"\",60*/
    //  0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00, /*"]",61*/
    //  0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, /*"^",62*/
    //  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80, /*"_",63*/
    //  0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, /*"`",64*/
    //  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20, /*"a",65*/
    //  0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00, /*"b",66*/
    //  0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00, /*"c",67*/
    //  0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20, /*"d",68*/
    //  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00, /*"e",69*/
    //  0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00, /*"f",70*/
    //  0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00, /*"g",71*/
    //  0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20, /*"h",72*/
    //  0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00, /*"i",73*/
    //  0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00, /*"j",74*/
    //  0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00, /*"k",75*/
    //  0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00, /*"l",76*/
    //  0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F, /*"m",77*/
    //  0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20, /*"n",78*/
    //  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00, /*"o",79*/
    //  0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00, /*"p",80*/
    //  0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80, /*"q",81*/
    //  0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00, /*"r",82*/
    //  0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00, /*"s",83*/
    //  0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00, /*"t",84*/
    //  0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20, /*"u",85*/
    //  0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00, /*"v",86*/
    //  0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00, /*"w",87*/
    //  0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00, /*"x",88*/
    //  0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00, /*"y",89*/
    //  0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00, /*"z",90*/
    //  0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40, /*"{",91*/
    //  0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00, /*"|",92*/
    //  0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00, /*"}",93*/
    //  0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, /*"~",94*/
};

void I2C_Delay(void)
{
    uint8_t i = 1;

    while (i--);
}

void I2C_PinLow(void)
{
    LCD_SDA_1_LOW();
    LCD_SCL_1_LOW();
}

void I2C_Start(void)
{
    LCD_SDA_1_HIGH();
    I2C_Delay();
    LCD_SCL_1_HIGH();
    I2C_Delay();
    LCD_SDA_1_LOW();
    I2C_Delay();
    LCD_SCL_1_LOW();
    I2C_Delay();
}

void I2C_Stop(void)
{
    LCD_SDA_1_LOW();
    LCD_SCL_1_HIGH();
    I2C_Delay();
    LCD_SDA_1_HIGH();
    I2C_Delay();
    LCD_SCL_1_HIGH();
}

uint8_t I2C_SendByte(uint8_t Byte)
{
    uint8_t F_temp = 0;
    uint8_t i;

    for (i = 0; i < 8; i++) {
        LCD_SCL_1_LOW();
        if (Byte & 0x80) {
            LCD_SDA_1_HIGH();
        } else {
            LCD_SDA_1_LOW();
        }
        I2C_Delay();
        LCD_SCL_1_HIGH();
        I2C_Delay();
        Byte = Byte << 1;
    }
    LCD_SCL_1_LOW();

    LCD_SDAIN_1();
    I2C_Delay();
    LCD_SCL_1_HIGH();
    I2C_Delay();
    if (GPIO_ReadInputDataBit(LCD_SDA_1_PORT, LCD_SDA_1)) {
        F_temp = 1;
    }
    I2C_Delay();
    LCD_SCL_1_LOW();
    LCD_SDAOUT_1();
    I2C_Delay();

    return F_temp;
}

uint8_t Tbl[24];

void OLED_WriteCmd(uint8_t Cmd)
{
    I2C_Start();
    I2C_SendByte(I2C_OLED);
    I2C_SendByte(0x00);
    I2C_SendByte(Cmd);
    I2C_Stop();
}

void OLED_WriteData(uint8_t Data)
{
    I2C_Start();
    I2C_SendByte(I2C_OLED);
    I2C_SendByte(0x40);
    I2C_SendByte(Data);
    I2C_Stop();
}

void OLED_SetXY(uint8_t x, uint8_t y)
{
    OLED_WriteCmd(0xb0 | y);
    OLED_WriteCmd(((0xf0 & x) >> 4) | 0x10);
    OLED_WriteCmd((0x0f & x) | 0x01);
}

/*
void OLED_OFF(void)
{
  OLED_WriteCmd(0xae);
}*/

void OLED_Clear(void)
{
    uint8_t i, j;

    for (i = 0; i < 8; i++) {
        OLED_WriteCmd(0xb0 + i);
        OLED_WriteCmd(0x00);
        OLED_WriteCmd(0x10);
        for (j = 0; j < 128; j++) {
            OLED_WriteData(0x00);
        }
    }
}

void OLED_Init(void)
{
    /*
  LCD_RESET = 1;
  DelayMs(10);
  LCD_RESET = 0;
  DelayMs(10);
  LCD_RESET = 1;
  DelayMs(10);
  */
    I2C_Stop();
    DelayMs(10);
    OLED_WriteCmd(0xae);       //--turn off oled panel
    OLED_WriteCmd(0x00);       //---set low column address
    OLED_WriteCmd(0x10);       //---set high column address
    OLED_WriteCmd(0x40);       //--set start line address  Set Mapping RAM Display Start Line (0x00~0x3F)
    OLED_WriteCmd(0x81);       //--set contrast control register
    OLED_WriteCmd(Brightness); // Set SEG Output Current Brightness
    OLED_WriteCmd(0xa1);       //--Set SEG/Column Mapping     0xa0左右反置 0xa1正常
    OLED_WriteCmd(0xc8);       //Set COM/Row Scan Direction   0xc0上下反置 0xc8正常
    OLED_WriteCmd(0xa6);       //--set normal display
    OLED_WriteCmd(0xa8);       //--set multiplex ratio(1 to 64)
    OLED_WriteCmd(0x3f);       //--1/64 duty
    OLED_WriteCmd(0xd3);       //-set display offset        Shift Mapping RAM Counter (0x00~0x3F)
    OLED_WriteCmd(0x00);       //-not offset
    OLED_WriteCmd(0xd5);       //--set display clock divide ratio/oscillator frequency
    OLED_WriteCmd(0x80);       //--set divide ratio, Set Clock as 100 Frames/Sec
    OLED_WriteCmd(0xd9);       //--set pre-charge period
    OLED_WriteCmd(0xf1);       //Set Pre-Charge as 15 Clocks & Discharge as 1 Clock
    OLED_WriteCmd(0xda);       //--set com pins hardware configuration
    OLED_WriteCmd(0x12);       //
    OLED_WriteCmd(0xdb);       //--set vcomh
    OLED_WriteCmd(0x40);       //Set VCOM Deselect Level
    OLED_WriteCmd(0x20);       //-Set Page Addressing Mode (0x00/0x01/0x02)
    OLED_WriteCmd(0x02);       //
    OLED_WriteCmd(0x8d);       //--set Charge Pump enable/disable
    OLED_WriteCmd(0x14);       //--set(0x10) disable
    OLED_WriteCmd(0xa4);       // Disable Entire Display On (0xa4/0xa5)
    OLED_WriteCmd(0xa6);       // Disable Inverse Display On (0xa6/a7)
    OLED_WriteCmd(0xaf);       //--turn on oled panel
    OLED_Clear();
    OLED_SetXY(0, 0);
}

void LCD_P8x16Str(void)
{
    uint8_t c, i, z;
    static uint8_t x      = 128 / 4;
    static uint8_t y      = 2;
    static uint8_t TblCtr = 0x00;

    c = Tbl[TblCtr] - 32;
    OLED_SetXY(x, y);
    for (i = 0; i < 8; i++) {
        z = F8X16[c * 16 + i];
        OLED_WriteData(z);
    }
    OLED_SetXY(x, y + 1);
    for (i = 8; i < 16; i++) {
        z = F8X16[c * 16 + i];
        OLED_WriteData(z);
    }

    TblCtr++;
    if (TblCtr > 23) {
        TblCtr = 0x00;
        x      = 128 / 4;
        y      = 2;
    } else {
        x += 8;
        if (x == 0x60) {
            x = 128 / 4;
            y = y + 2;
        }
    }
}

uint8_t HexToAsc(uint8_t aHex)
{
    if (aHex <= 9) {
        aHex += 0x30;
    } else if ((aHex >= 10) && (aHex <= 15)) {
        aHex += 0x37;
    } else {
        aHex = 0xff;
    }

    return aHex;
}

void OledDisp(void)
{
    uint8_t j;
    uint16_t tmp;

    for (j = 0; j < 24; j++) {
        Tbl[j] = ' ';
    }

    //line 1
    Tbl[0] = '1';
    Tbl[1] = ':';
    Tbl[2] = ' ';                      //HexToAsc(FlowMeterCtr/10000);
    Tbl[3] = HexToAsc(PumpSpeed / 10); //HexToAsc(FlowMeterCtr/1000%10);
    Tbl[4] = HexToAsc(PumpSpeed % 10); //HexToAsc(FlowMeterCtr%1000/100);
    Tbl[5] = ' ';                      //HexToAsc(FlowMeterCtr%100/10);
    Tbl[6] = ' ';                      //HexToAsc(FlowMeterCtr%100%10);
    Tbl[7] = ' ';
    //line 2
    tmp     = (uint16_t)Temperature;
    Tbl[8]  = '2';
    Tbl[9]  = ':';
    Tbl[10] = HexToAsc(tmp / 1000 % 10);
    Tbl[11] = HexToAsc(tmp % 1000 / 100);
    Tbl[12] = HexToAsc(tmp % 100 / 10);
    Tbl[13] = '.';
    Tbl[14] = HexToAsc(tmp % 100 % 10);
    Tbl[15] = ' ';
    //line 3
    Tbl[16] = HexToAsc(TIME.hour / 10);
    Tbl[17] = HexToAsc(TIME.hour % 10);
    Tbl[18] = ':';
    Tbl[19] = HexToAsc(TIME.min / 10);
    Tbl[20] = HexToAsc(TIME.min % 10);
    Tbl[21] = ':';
    Tbl[22] = HexToAsc(TIME.sec / 10);
    Tbl[23] = HexToAsc(TIME.sec % 10);
}

#else

void LCD_P8x16Str(void) {}
void OLED_Init(void) {}
void OledDisp(void) {}

#endif
